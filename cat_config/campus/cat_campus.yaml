# port: 7890                 #æœ¬åœ°httpä»£ç†ç«¯å£
# socks-port: 7891           #æœ¬åœ°socks5ä»£ç†ç«¯å£
mixed-port: 7890 #æœ¬åœ°æ··åˆä»£ç†(httpå’Œsocks5åˆå¹¶)ç«¯å£
# redir-port: 7892           #æœ¬åœ°Linux/macOS Redirä»£ç†ç«¯å£
# tproxy-port: 7893          #æœ¬åœ°Linux Tproxyä»£ç†ç«¯å£

# authentication:            # æœ¬åœ°SOCKS5/HTTP(S)ä»£ç†ç«¯å£è®¤è¯è®¾ç½®
#  - "user1:pass1"
#  - "user2:pass2"

allow-lan: false #å…è®¸å±€åŸŸç½‘è¿æ¥(false/true)
bind-address: #ç›‘å¬IPç™½åå•(å½“allow-lanï¼štrue)ï¼Œåªå…è®¸åˆ—è¡¨è®¾å¤‡
  "*" #å…¨éƒ¨è®¾å¤‡
  # 192.168.122.11                #å•ä¸ªip4åœ°å€
  # "[aaaa::a8aa:ff:fe09:57d8]"   #å•ä¸ªip6åœ°å€

mode: rule #clashå·¥ä½œæ¨¡å¼(rule/global/direct,metaæš‚ä¸æ”¯æŒscript)
log-level: info #æ—¥å¿—ç­‰çº§(info/warning/error/debug/silent)
ipv6: false #ip6å¼€å…³ï¼Œå½“ä¸ºfalseæ—¶ï¼Œåœæ­¢è§£æhostanmesä¸ºip6åœ°å€

external-controller: 127.0.0.1:9090 #æ§åˆ¶å™¨ç›‘å¬åœ°å€
# external-ui: folder                   #httpæœåŠ¡è·¯å¾„ï¼Œå¯ä»¥æ”¾é™æ€webç½‘é¡µï¼Œå¦‚yacdçš„æ§åˆ¶é¢æ¿
#å¯é€šè¿‡`http://{{external-controller}}/ui`ç›´æ¥ä½¿ç”¨
# secret: ""                            #æ§åˆ¶å™¨ç™»å½•å¯†ç 
global-ua: "FFF"
# interface-name: en0        #å‡ºå£ç½‘å¡åç§°

#--------------------------------------------------------------------------------------#
# DNS æœåŠ¡å™¨å’Œå»ºç«‹è¿æ¥æ—¶çš„ é™æ€ Hosts, ä»…åœ¨ dns.enhanced-mode æ¨¡å¼ä¸º redir-host ç”Ÿæ•ˆ
# æ”¯æŒé€šé…ç¬¦åŸŸå (ä¾‹å¦‚: *.clash.dev, *.foo.*.example.com )
# ä¸ä½¿ç”¨é€šé…ç¬¦çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸå (ä¾‹å¦‚: foo.example.com > *.example.com > .example.com )
# æ³¨æ„: +.foo.com çš„æ•ˆæœç­‰åŒäº .foo.com å’Œ foo.com
# hosts:
#   '*.clash.dev': 127.0.0.1
#   'alpha.clash.dev': '::1'
#   test.com: [1.1.1.1, 2.2.2.2]
#   baidu.com: google.com
#--------------------------------------------------------------------------------------#
dns:
  enable: true
  use-hosts: true
  prefer-h3: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter: [
      "*.lan",
      "+.local",
      "*.linksys.com",
      "*.linksyssmartwifi.com",
      "swscan.apple.com",
      "mesu.apple.com",
      "time.*.com",
      "time.*.gov",
      "time.*.edu.cn",
      "time.*.apple.com",
      "time1.*.com",
      "time2.*.com",
      "time3.*.com",
      "time4.*.com",
      "time5.*.com",
      "time6.*.com",
      "time7.*.com",
      "ntp.*.com",
      "ntp.*.com",
      "ntp1.*.com",
      "ntp2.*.com",
      "ntp3.*.com",
      "ntp4.*.com",
      "ntp5.*.com",
      "ntp6.*.com",
      "ntp7.*.com",
      "*.time.edu.cn",
      "*.ntp.org.cn",
      "+.pool.ntp.org",
      "time1.cloud.tencent.com",
      "+.leigod.com",
      "+.vivox.com",
      "+.stun.+",
      ".n.n.srv.nintendo.net",
      "+.stun.playstation.net",
      "xbox.*.*.microsoft.com",
      "*.*.xboxlive.com",
      "lens.l.google.com",
      "*.mcdn.bilivideo.cn",
      "localhost.ptlogin2.qq.com",
    ]
  default-nameserver:
    ["https://223.5.5.5/dns-query", "https://120.53.53.53/dns-query"]
  nameserver:
    # - 192.168.123.190
    # tencent dns
    # - https://doh.pub/dns-query
    # - https://1.12.12.12/dns-query
    # - https://120.53.53.53/dns-query
    # - https://sm2.doh.pub/dns-query
    # ali dns
    # - https://dns.alidns.com/dns-query
    # - https://223.5.5.5/dns-query
    # - https://223.6.6.6/dns-query
    # google dns
    - https://dns.google/dns-query
    - https://8.8.8.8/dns-query
    - https://8.8.4.4/dns-query
    # cloudflare dns
    - https://cloudflare-dns.com/dns-query
    - https://1.1.1.1/dns-query
  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
#--------------------------------------------------------------------------------------#
proxies:
  # - name: "DPI åŠ å¯†"
  #   type: hysteria2
  #   server: server.com
  #   port: 443
  #   ports: 443-8443
  #   password: yourpassword
  #   up: "30 Mbps"
  #   down: "200 Mbps"
  #   obfs: salamander # é»˜è®¤ä¸ºç©ºï¼Œå¦‚æœå¡«å†™åˆ™å¼€å¯obfsï¼Œç›®å‰ä»…æ”¯æŒsalamander
  #   obfs-password: yourpassword
  #   sni: server.com
  #   skip-cert-verify: false
  #   fingerprint: xxxx
  #   alpn:
  #     - h3
  #   ca: "./my.ca"
  #   ca-str: "xyz"
#--------------------------------------------------------------------------------------#
proxy-providers:
  Global-ISP:
    type: http
    url: ""
    interval: 18000 # æ›´æ–°providerçš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’
    path: "./Proxy-Providers/Global-ISP.yaml"
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      timeout: 5000
      lazy: true
      expected-status: 204
      interval: 3600 # æ£€æŸ¥providerçš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’
#--------------------------------------------------------------------------------------#
proxy-groups:
  - name: "ğŸ”° é€‰æ‹©èŠ‚ç‚¹"
    type: select
    proxies:
      - DIRECT
    use:
      - Global-ISP
    url: https://www.gstatic.com/generate_204

  - name: "â˜ï¸ OneDrive"
    type: select
    proxies:
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
      - DIRECT
    use:
      - Global-ISP
    url: https://www.gstatic.com/generate_204

  - name: "ğŸ“• å­¦æœ¯ç½‘ç«™"
    type: select
    proxies:
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
    use:
      - Global-ISP
    url: https://connect.rom.miui.com/generate_204

  - name: "ğŸ”’ æ·±åº¦åŒ…æ£€æµ‹"
    type: select
    proxies:
      - DPI åŠ å¯†
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
    url: https://connect.rom.miui.com/generate_204

  - name: "ğŸ§ è…¾è®¯QQ&Wechat"
    type: select
    proxies:
      - DPI åŠ å¯†
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
    url: https://connect.rom.miui.com/generate_204

  - name: ğŸ® Steam ç™»å½•/ä¸‹è½½
    type: select
    proxies:
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
    use:
      - Global-ISP
    filter: "(^(?!.*?(Premium)).*(é˜¿æ ¹å»·|Argentina|AR))|^(?!.*?(Premium)).*(ä¿„ç½—æ–¯|Russia|RU)|^(?!.*?(Premium)).*(åœŸè€³å…¶|Turkey|TR)|^(?!.*?(Premium)).*(å°åº¦|India|IN)"
    url: https://connect.rom.miui.com/generate_204

  - name: ğŸ® Steam å•†åº—/ç¤¾åŒº
    type: select
    proxies:
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
      - DIRECT
    use:
      - Global-ISP
    filter: "(^(?!.*?(Premium)).*(é˜¿æ ¹å»·|Argentina|AR))|^(?!.*?(Premium)).*(ä¿„ç½—æ–¯|Russia|RU)|^(?!.*?(Premium)).*(åœŸè€³å…¶|Turkey|TR)|^(?!.*?(Premium)).*(å°åº¦|India|IN)"
    url: https://www.gstatic.com/generate_204

  - name: "ğŸ“€ Tiktok æµåª’ä½“"
    type: select
    proxies:
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
      - DIRECT
    filter: "(^(?!.*?(Premium)).*(é¦™æ¸¯|Hong Kong|HK))|^(?!.*?(Premium)).*(å°æ¹¾|Taiwan|TW)|^(?!.*?(Premium)).*(æ—¥æœ¬|Japan|JP)"
    use:
      - Global-ISP
    url: https://www.gstatic.com/generate_204

  - name: "ğŸï¸ çˆ±å¥‡è‰º&å“”å“©å“”å“©"
    type: select
    proxies:
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
    filter: "(^(?!.*?(Premium)).*(é¦™æ¸¯|Hong Kong|HK))|^(?!.*?(Premium)).*(å°æ¹¾|Taiwan|TW)|^(?!.*?(Premium)).*(æ—¥æœ¬|Japan|JP)"
    use:
      - Global-ISP
    url: https://connect.rom.miui.com/generate_204

  - name: "ğŸŒ©ï¸ Cloudflare"
    type: select
    proxies:
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
      - DIRECT
    use:
      - Global-ISP
    url: https://www.gstatic.com/generate_204

  - name: "ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™"
    type: select
    proxies:
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
    url: https://connect.rom.miui.com/generate_204

  - name: "ğŸ›‘ æ‹¦æˆªå¹¿å‘Š"
    type: select
    proxies:
      - REJECT
      - DIRECT
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹

  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies:
      - ğŸ”° é€‰æ‹©èŠ‚ç‚¹
      - DIRECT
#--------------------------------------------------------------------------------------#
rules:
  - RULE-SET,applications,DIRECT
  - RULE-SET,my_rules_DIRECT,DIRECT
  - RULE-SET,my_dpi,ğŸ”’ æ·±åº¦åŒ…æ£€æµ‹
  - RULE-SET,my_tencent,ğŸ§ è…¾è®¯QQ&Wechat
  - RULE-SET,my_rules_Proxy,ğŸ”° é€‰æ‹©èŠ‚ç‚¹
  - RULE-SET,my_scholar,ğŸ“• å­¦æœ¯ç½‘ç«™ #  my_scholar
  - RULE-SET,private,DIRECT #  è·¯ç”±å™¨
  - RULE-SET,lancidr,DIRECT #  å±€åŸŸç½‘æ®µ
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,ğŸ”° é€‰æ‹©èŠ‚ç‚¹
  - RULE-SET,Onedrive,â˜ï¸ OneDrive
  - RULE-SET,BiliBili,ğŸï¸ çˆ±å¥‡è‰º&å“”å“©å“”å“©
  - RULE-SET,iQIYI,ğŸï¸ çˆ±å¥‡è‰º&å“”å“©å“”å“©
  - RULE-SET,YouTube,ğŸ“€ Tiktok æµåª’ä½“
  - RULE-SET,HBO,ğŸ“€ Tiktok æµåª’ä½“
  - RULE-SET,Disney,ğŸ“€ Tiktok æµåª’ä½“
  - RULE-SET,Netflix,ğŸ“€ Tiktok æµåª’ä½“
  - RULE-SET,Spotify,ğŸ“€ Tiktok æµåª’ä½“
  - RULE-SET,SteamCN,ğŸ® Steam ç™»å½•/ä¸‹è½½
  - RULE-SET,Steam,ğŸ® Steam å•†åº—/ç¤¾åŒº
  - RULE-SET,direct,ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™
  - RULE-SET,cncidr,ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™
  - RULE-SET,Cloudflare,ğŸŒ©ï¸ Cloudflare
  - RULE-SET,telegramcidr,ğŸ”° é€‰æ‹©èŠ‚ç‚¹
  - RULE-SET,proxy,ğŸ”° é€‰æ‹©èŠ‚ç‚¹
  - RULE-SET,reject,ğŸ›‘ æ‹¦æˆªå¹¿å‘Š
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
#--------------------------------------------------------------------------------------#
rule-providers:
  my_dpi:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/nfcbx/Git_Learn@main/cat_config/rules/my_dpi.yaml"
    path: ./ruleset/my/dpi.yaml
    interval: 86400

  my_rules_DIRECT:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/nfcbx/Git_Learn@main/cat_config/rules/my_rules_DIRECT.yaml"
    path: ./ruleset/my/DIRECT.yaml
    interval: 86400

  my_rules_Proxy:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/nfcbx/Git_Learn@main/cat_config/rules/my_rules_Proxy.yaml"
    path: ./ruleset/my/Proxy.yaml
    interval: 86400

  my_scholar:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/nfcbx/Git_Learn@main/cat_config/rules/my_scholar.yaml"
    path: ./ruleset/my/scholar.yaml
    interval: 86400

  my_tencent:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/nfcbx/Git_Learn@main/cat_config/rules/my_tencent.yaml"
    path: ./ruleset/my/tencent.yaml
    interval: 86400
  #--------------------------------------------------------------------------------------#
  # from https://github.com/Loyalsoldier/clash-rules
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/Loyalsoldier/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/Loyalsoldier/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/Loyalsoldier/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/Loyalsoldier/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/Loyalsoldier/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/Loyalsoldier/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/Loyalsoldier/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/Loyalsoldier/gfw.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/Loyalsoldier/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/Loyalsoldier/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/Loyalsoldier/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/Loyalsoldier/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/Loyalsoldier/applications.yaml
    interval: 86400
  #--------------------------------------------------------------------------------------#
  # rules from https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash
  Onedrive:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OneDrive/OneDrive.yaml"
    path: ./ruleset/blackmatrix7/Onedrive.yaml
    interval: 86400

  BiliBili:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./ruleset/blackmatrix7/BiliBili.yaml
    interval: 86400

  iQIYI:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/iQIYI/iQIYI.yaml"
    path: ./ruleset/blackmatrix7/iQIYI.yaml
    interval: 86400

  Cloudflare:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Cloudflare/Cloudflare.yaml"
    path: ./ruleset/blackmatrix7/Cloudflare.yaml
    interval: 86400

  SteamCN:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/SteamCN/SteamCN.yaml"
    path: ./ruleset/blackmatrix7/SteamCN.yaml
    interval: 86400

  Steam:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml"
    path: ./ruleset/blackmatrix7/Steam.yaml
    interval: 86400

  TikTok:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/TikTok/TikTok.yaml"
    path: ./ruleset/blackmatrix7/TikTok.yaml
    interval: 86400

  YouTube:
    type: http
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleset/blackmatrix7/YouTube.yaml
    interval: 86400

  HBO:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/HBO/HBO.yaml"
    path: ./ruleset/blackmatrix7/HBO.yaml
    interval: 86400

  Disney:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Disney/Disney.yaml"
    path: ./ruleset/blackmatrix7/Disney.yaml
    interval: 86400

  Netflix:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml"
    path: ./ruleset/blackmatrix7/Netflix.yaml
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml"
    path: ./ruleset/blackmatrix7/Spotify.yaml
    interval: 86400
